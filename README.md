Техническое задание: Веб-приложение для управления заказами с приоритетной обработкой.
Разработайте веб-приложение на основе .NET 7 и ASP.NET Core, предоставляющее API для управления сущностью Order (Заказ).
Приложение должно использовать Entity Framework Core для доступа к данным, Hangfire для фоновых задач.
1. API и Бизнес-логика
Реализуйте RESTful API для CRUD операций с сущностью Order.
•	Сущность Order должна содержать следующие поля:
•	Id (идентификатор заказа)
•	CustomerName (имя клиента)
•	OrderDate (дата заказа)
•	TotalAmount (общая сумма заказа)
•	Currency (валюта суммы заказа, например, USD, EUR)
•	Status (статус заказа: Pending, Processing, Completed, Cancelled)
•	Priority (приоритет обработки заказа)
•	TotalAmountInBaseCurrency (общая сумма в базовой валюте, например, USD)
Используйте Entity Framework Core для взаимодействия с базой данных (MS SQL или PostgreSQL).
2. Переходы между статусами и действия на каждом этапе
•	Статусы заказа:
•	Pending — Заказ находится в ожидании обработки.
•	Processing — Заказ обрабатывается (например, идет конвертация валюты).
•	Completed — Заказ успешно обработан.
•	Cancelled — Заказ отменен и не подлежит дальнейшей обработке.
•	Переходы между статусами:
•	Создание заказа:
•	При создании заказа через API его статус по умолчанию устанавливается как Pending.
•	Статус можно изменить вручную на Cancelled, если заказ больше не актуален.
•	Обработка заказов со статусом "Pending":
•	Фоновая задача в Hangfire каждые 5 минут проверяет все заказы со статусом Pending.
•	Для каждого заказа:
•	Проверяется наличие актуального курса валют с использованием внешнего API обмена валют.
•	Выполняется конвертация TotalAmount в базовую валюту (например, USD), и результат сохраняется в поле TotalAmountInBaseCurrency.
•	Заказ переводится в статус Processing.
•	Если курс валют недоступен или произошла ошибка, заказ остается в статусе Pending для повторной обработки при следующем запуске фоновой задачи.
•	Обработка заказов со статусом "Processing":
•	После успешной конвертации суммы заказа в базовую валюту:
•	Заказ переводится в статус Completed.
•	Отправляется сообщение в текстовый файл, содержащее информацию о заказе:
•	Текущее время
•	Id
•	CustomerName
•	TotalAmount с исходной валютой
•	TotalAmountInBaseCurrency с базовой валютой
•	Отмена заказа:
•	Заказ может быть переведен в статус Cancelled на любом этапе до завершения обработки.
•	Заказы в статусе Cancelled не обрабатываются ни фоновыми задачами
3. Приоритет обработки заказов
В сущность Order добавьте поле Priority, которое будет числовым значением для определения очередности обработки.
•	Алгоритм расчета приоритета:
•	Изначальный приоритет:
•	Изначальный приоритет заказа рассчитывается как сумма двух компонентов:
•	За каждую единицу валюты в TotalAmount присваивается 1 балл (например, заказ на 100 USD получит 100 баллов).
•	За каждые 10 минут, прошедшие с момента создания заказа (то есть с момента OrderDate), добавляется 1 балл за каждую минуту (при первом создании заказа — 0).
•	Обновление приоритета:
•	Каждые 5 минут фоновая задача пересчитывает приоритет заказов. Если заказ находится в статусе Pending, ему добавляется 1 балл за каждый час, прошедший с момента создания.
•	Правила обработки:
•	Заказы с наивысшим приоритетом обрабатываются первыми.
•	Приоритет пересчитывается каждые 5 минут для всех заказов в статусе Pending. Это обеспечивает приоритетную обработку более важных заказов (например, с высокой суммой) или тех, что дольше ожидают обработки.
4. Валидация данных
Используйте FluentValidation для проверки входящих данных.
•	Убедитесь, что:
•	CustomerName не пустой.
•	TotalAmount больше нуля.
•	OrderDate не находится в будущем.
•	Currency является поддерживаемой (например, USD или EUR).
5. Обработка заказов с использованием Hangfire
Фоновая задача Hangfire каждые 5 минут:
•	Обрабатывает заказы в статусе Pending, начиная с заказов с наивысшим приоритетом.
•	Переход статуса заказа на Processing выполняется после успешной конвертации валюты.
•	После успешной обработки заказ переводится в статус Completed, а информация о заказе отправляется в текстовый файл.
•	Если курс валют недоступен или произошла ошибка, заказ остается в статусе Pending для повторной обработки при следующем запуске задачи.
